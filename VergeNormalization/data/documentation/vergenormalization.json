{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"State management plays a crucial role in building efficient and maintainable applications. One of the essential aspects of state management is organizing the data in a way that simplifies its manipulation and usage. This is where normalization becomes vital."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Normalization is the process of structuring data in a way that eliminates redundancy and ensures data consistency. It is essential in state-management libraries because it significantly reduces the computational complexity of operations and makes it easier to manage the state."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Docs:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/swiftpackageindex.com\/VergeGroup\/swift-Verge\/main\/documentation\/vergenormalization"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"https:\/\/swiftpackageindex.com\/VergeGroup\/swift-Verge\/main\/documentation\/vergenormalizationderived"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Let’s take a look at an example to illustrate the difference between normalized and denormalized data structures."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Denormalized data structure:"}]}]},{"type":"codeListing","syntax":"yaml","code":["posts:","  - id: 1","    title: \"Post 1\"","    author:","      id: 1","      name: \"Alice\"","  - id: 2","    title: \"Post 2\"","    author:","      id: 1","      name: \"Alice\"","  - id: 3","    title: \"Post 3\"","    author:","      id: 2","      name: \"Bob\""]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the denormalized structure, author data is duplicated in each post, which can lead to inconsistencies and make it harder to manage the state."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Normalized data structure:"}]}]},{"type":"codeListing","syntax":"yaml","code":["entities:","  authors:","    1:","      id: 1","      name: \"Alice\"","    2:","      id: 2","      name: \"Bob\"","  posts:","    1:","      id: 1","      title: \"Post 1\"","      authorId: 1","    2:","      id: 2","      title: \"Post 2\"","      authorId: 1","    3:","      id: 3","      title: \"Post 3\"","      authorId: 2"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the normalized structure, author data is stored separately from posts, eliminating data redundancy and ensuring data consistency. The relationship between posts and authors is represented by the "},{"type":"codeVoice","code":"authorId"},{"type":"text","text":" field in the posts."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"VergeORM is designed to handle normalization in state-management libraries effectively. By leveraging VergeORM, you can simplify your state management, reduce the computational complexity of operations, and improve the overall performance and maintainability of your application."}]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Defining Entities"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s an example of how to define the "},{"type":"codeVoice","code":"Book"},{"type":"text","text":" and "},{"type":"codeVoice","code":"Author"},{"type":"text","text":" entities:"}]},{"type":"codeListing","syntax":"swift","code":["struct Book: EntityType {","  ","  typealias EntityIDRawType = String","  ","  var entityID: EntityID {","    .init(rawID)","  }","  ","  let rawID: String","  var name: String = \"initial\"","  let authorID: Author.EntityID","}","","struct Author: EntityType {","  ","  typealias EntityIDRawType = String","  ","  var entityID: EntityID {","    .init(rawID)","  }","    ","  let rawID: String","  var name: String = \"\"","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Defining Database Schema"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"To store the entities in the state, you need to define the database schema:"}]},{"type":"codeListing","syntax":"swift","code":["@NormalizedStorage","struct Database {","","  @Table","  var books: Tables.Hash<Book> = .init()","","  @Table","  var authors: Tables.Hash<Book> = .init()","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Embedding the Database in State"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Embed the "},{"type":"codeVoice","code":"Database"},{"type":"text","text":" in your application’s state:"}]},{"type":"codeListing","syntax":"swift","code":["struct RootState: StateType {","  var database: Database = .init()","}"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Storing and Querying Entities"}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Here’s an example of how to store and query entities using a "},{"type":"codeVoice","code":"store"},{"type":"text","text":" property"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Storing entities","store.commit {","  $0.database.performBatchUpdates { context in","    let authors = (0..<10).map { i in","      Author(rawID: \"\\(i)\")","    }","    let result = context.modifying.author.insert(authors)","  }","}","","\/\/ Querying entities","let book = store.state.database.db.book.find(by: .init(\"1\"))","let author = store.state.database.db.author.find(by: .init(\"1\"))"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"In this example, we use "},{"type":"codeVoice","code":"store.commit"},{"type":"text","text":" to perform batch updates on the database. We insert a new set of authors into the "},{"type":"codeVoice","code":"author"},{"type":"text","text":" entity table. Then, we use "},{"type":"codeVoice","code":"store.state.database.db"},{"type":"text","text":" to query the "},{"type":"codeVoice","code":"book"},{"type":"text","text":" and "},{"type":"codeVoice","code":"author"},{"type":"text","text":" entities by their identifiers."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"By using VergeNormalization, you can efficiently manage your application state with a normalized data structure, which simplifies your state management, reduces the computational complexity of operations, and improves the overall performance and maintainability of your application."}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/vergenormalization"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization","interfaceLanguage":"swift"},"topicSections":[{"title":"Protocols","identifiers":["doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/EntityType","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NormalizedStorageType","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/StorageSelector","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/TableSelector","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/TableType"]},{"title":"Structures","identifiers":["doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/AbsoluteTableSelector","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/AnyEntityIdentifier","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/EntityIdentifier","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/EntityTableIdentifier","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/InsertionResult","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/KeyPathStorageSelector","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/KeyPathTableSelector","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/ModifyingTransaction","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NonAtomicCounter"]},{"title":"Macros","identifiers":["doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Index()","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NormalizedStorage()","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Table()"]},{"title":"Enumerations","identifiers":["doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Indexes","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/ModifyingTransactionError","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NormalizedStorageComparisons","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/PrimitiveIdentifier","doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Tables"]}],"kind":"symbol","metadata":{"roleHeading":"Framework","externalID":"VergeNormalization","title":"VergeNormalization","symbolKind":"module","role":"collection","modules":[{"name":"VergeNormalization"}]},"hierarchy":{"paths":[[]]},"references":{"doc://VergeNormalization/documentation/VergeNormalization/EntityIdentifier":{"role":"symbol","title":"EntityIdentifier","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"EntityIdentifier"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/EntityIdentifier","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"EntityIdentifier"}],"url":"\/documentation\/vergenormalization\/entityidentifier"},"doc://VergeNormalization/documentation/VergeNormalization/NormalizedStorage()":{"role":"symbol","title":"NormalizedStorage()","fragments":[{"kind":"keyword","text":"macro"},{"kind":"text","text":" "},{"kind":"identifier","text":"NormalizedStorage"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NormalizedStorage()","kind":"symbol","type":"topic","url":"\/documentation\/vergenormalization\/normalizedstorage()"},"doc://VergeNormalization/documentation/VergeNormalization/NormalizedStorageComparisons":{"role":"symbol","title":"NormalizedStorageComparisons","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"NormalizedStorageComparisons"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NormalizedStorageComparisons","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NormalizedStorageComparisons"}],"url":"\/documentation\/vergenormalization\/normalizedstoragecomparisons"},"doc://VergeNormalization/documentation/VergeNormalization/PrimitiveIdentifier":{"role":"symbol","title":"PrimitiveIdentifier","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"PrimitiveIdentifier"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/PrimitiveIdentifier","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"PrimitiveIdentifier"}],"url":"\/documentation\/vergenormalization\/primitiveidentifier"},"doc://VergeNormalization/documentation/VergeNormalization/Index()":{"role":"symbol","title":"Index()","fragments":[{"kind":"keyword","text":"macro"},{"kind":"text","text":" "},{"kind":"identifier","text":"Index"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Index()","kind":"symbol","type":"topic","url":"\/documentation\/vergenormalization\/index()"},"doc://VergeNormalization/documentation/VergeNormalization/EntityType":{"role":"symbol","title":"EntityType","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"EntityType"}],"abstract":[{"type":"text","text":"A protocol describes object is an Entity."}],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/EntityType","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"EntityType"}],"url":"\/documentation\/vergenormalization\/entitytype"},"https://swiftpackageindex.com/VergeGroup/swift-Verge/main/documentation/vergenormalization":{"title":"VergeNormalization","titleInlineContent":[{"type":"text","text":"VergeNormalization"}],"type":"link","identifier":"https:\/\/swiftpackageindex.com\/VergeGroup\/swift-Verge\/main\/documentation\/vergenormalization","url":"https:\/\/swiftpackageindex.com\/VergeGroup\/swift-Verge\/main\/documentation\/vergenormalization"},"doc://VergeNormalization/documentation/VergeNormalization/Tables":{"role":"symbol","title":"Tables","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Tables"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Tables","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Tables"}],"url":"\/documentation\/vergenormalization\/tables"},"doc://VergeNormalization/documentation/VergeNormalization/AnyEntityIdentifier":{"role":"symbol","title":"AnyEntityIdentifier","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AnyEntityIdentifier"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/AnyEntityIdentifier","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AnyEntityIdentifier"}],"url":"\/documentation\/vergenormalization\/anyentityidentifier"},"doc://VergeNormalization/documentation/VergeNormalization/InsertionResult":{"role":"symbol","title":"InsertionResult","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"InsertionResult"}],"abstract":[{"type":"text","text":"An object indicates result of insertion"},{"type":"text","text":" "},{"type":"text","text":"It can be used to create a getter object."}],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/InsertionResult","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"InsertionResult"}],"url":"\/documentation\/vergenormalization\/insertionresult"},"https://swiftpackageindex.com/VergeGroup/swift-Verge/main/documentation/vergenormalizationderived":{"title":"VergeNormalizationDerived","titleInlineContent":[{"type":"text","text":"VergeNormalizationDerived"}],"type":"link","identifier":"https:\/\/swiftpackageindex.com\/VergeGroup\/swift-Verge\/main\/documentation\/vergenormalizationderived","url":"https:\/\/swiftpackageindex.com\/VergeGroup\/swift-Verge\/main\/documentation\/vergenormalizationderived"},"doc://VergeNormalization/documentation/VergeNormalization/TableSelector":{"role":"symbol","title":"TableSelector","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TableSelector"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/TableSelector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TableSelector"}],"url":"\/documentation\/vergenormalization\/tableselector"},"doc://VergeNormalization/documentation/VergeNormalization/StorageSelector":{"role":"symbol","title":"StorageSelector","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"StorageSelector"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/StorageSelector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"StorageSelector"}],"url":"\/documentation\/vergenormalization\/storageselector"},"doc://VergeNormalization/documentation/VergeNormalization/KeyPathTableSelector":{"role":"symbol","title":"KeyPathTableSelector","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"KeyPathTableSelector"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/KeyPathTableSelector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"KeyPathTableSelector"}],"url":"\/documentation\/vergenormalization\/keypathtableselector"},"doc://VergeNormalization/documentation/VergeNormalization":{"role":"collection","title":"VergeNormalization","abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization","kind":"symbol","type":"topic","url":"\/documentation\/vergenormalization"},"doc://VergeNormalization/documentation/VergeNormalization/ModifyingTransaction":{"role":"symbol","title":"ModifyingTransaction","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"ModifyingTransaction"}],"abstract":[{"type":"text","text":"The context of the current modifying storage update."}],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/ModifyingTransaction","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ModifyingTransaction"}],"url":"\/documentation\/vergenormalization\/modifyingtransaction"},"doc://VergeNormalization/documentation/VergeNormalization/ModifyingTransactionError":{"role":"symbol","title":"ModifyingTransactionError","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"ModifyingTransactionError"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/ModifyingTransactionError","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ModifyingTransactionError"}],"url":"\/documentation\/vergenormalization\/modifyingtransactionerror"},"doc://VergeNormalization/documentation/VergeNormalization/Table()":{"role":"symbol","title":"Table()","fragments":[{"kind":"keyword","text":"macro"},{"kind":"text","text":" "},{"kind":"identifier","text":"Table"},{"kind":"text","text":"()"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Table()","kind":"symbol","type":"topic","url":"\/documentation\/vergenormalization\/table()"},"doc://VergeNormalization/documentation/VergeNormalization/EntityTableIdentifier":{"role":"symbol","title":"EntityTableIdentifier","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"EntityTableIdentifier"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/EntityTableIdentifier","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"EntityTableIdentifier"}],"url":"\/documentation\/vergenormalization\/entitytableidentifier"},"doc://VergeNormalization/documentation/VergeNormalization/NormalizedStorageType":{"role":"symbol","title":"NormalizedStorageType","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"NormalizedStorageType"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NormalizedStorageType","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NormalizedStorageType"}],"url":"\/documentation\/vergenormalization\/normalizedstoragetype"},"doc://VergeNormalization/documentation/VergeNormalization/AbsoluteTableSelector":{"role":"symbol","title":"AbsoluteTableSelector","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"AbsoluteTableSelector"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/AbsoluteTableSelector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"AbsoluteTableSelector"}],"url":"\/documentation\/vergenormalization\/absolutetableselector"},"doc://VergeNormalization/documentation/VergeNormalization/TableType":{"role":"symbol","title":"TableType","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"TableType"}],"abstract":[{"type":"text","text":"a storage of the entity"}],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/TableType","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"TableType"}],"url":"\/documentation\/vergenormalization\/tabletype"},"doc://VergeNormalization/documentation/VergeNormalization/KeyPathStorageSelector":{"role":"symbol","title":"KeyPathStorageSelector","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"KeyPathStorageSelector"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/KeyPathStorageSelector","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"KeyPathStorageSelector"}],"url":"\/documentation\/vergenormalization\/keypathstorageselector"},"doc://VergeNormalization/documentation/VergeNormalization/NonAtomicCounter":{"role":"symbol","title":"NonAtomicCounter","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"NonAtomicCounter"}],"abstract":[{"type":"text","text":"A container that manages raw value to describe mark as updated."}],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/NonAtomicCounter","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"NonAtomicCounter"}],"url":"\/documentation\/vergenormalization\/nonatomiccounter"},"doc://VergeNormalization/documentation/VergeNormalization/Indexes":{"role":"symbol","title":"Indexes","fragments":[{"kind":"keyword","text":"enum"},{"kind":"text","text":" "},{"kind":"identifier","text":"Indexes"}],"abstract":[],"identifier":"doc:\/\/VergeNormalization\/documentation\/VergeNormalization\/Indexes","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Indexes"}],"url":"\/documentation\/vergenormalization\/indexes"}}}